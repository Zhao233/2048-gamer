<html>
    <head>
        <script src="http://code.jquery.com/jquery.js"></script>
    
        <script>
            function merge(array){
                var nodes = array;

                for(var row = 0; row < nodes.length ; row++){//以行为单位,从上到下
                    for(var column = nodes[0].length-1; column >= 0 ; column--){//以列为单位，从右往左
                        console.log("row:" + row + ", column:" + column);

                        if(nodes[row][column] != undefined && nodes[row][column] != 0){
                        
                            var temp = nodes[row][column];
                        
                            for(var index = ( column - 1 ); index >=0 ; index-- ){
                                if(nodes[row][index] == undefined || nodes[row][index] == 0){//是空节点的话就跳过
                                    continue;
                                }
                            
                                if( nodes[row][index] == temp ){ //当两个节点的值相等时，把下面的值合并上去，并清除下面的值
                                    nodes[row][index] = parseInt( nodes[row][index] ) * 2;
                                
                                    nodes[row][column] = undefined;

                                    column = index;//遍历下一个元素（合并后的下一个元素）
                                }

                                break;
                            }
                        }
                    }

                    for(var index_check = 0; index_check < nodes[0].length; index_check++){
                        if(nodes[row][index_check] == 0){
                             
                        }
                    }

                    for(var index_check = nodes[0].length-1; index_check > 0; index_check--){//从右往左，将节点向左移动
                        var present = nodes[row][index_check];
                        var next = nodes[row][index_check-1];
                        
                        if(present == undefined || present == 0){
                            continue;
                        }
                    
                        if( next == undefined || next == 0 ){
                            nodes[row][index_check-1] = present;
                            nodes[row][index_check] = undefined;
                        }
                    }

                }
            
            
                console.log("矩阵： ")

                for(var i = 0; i < nodes.length; i++ ){
                    console.log(nodes[i][0]+" "+nodes[i][1]+" "+nodes[i][2]+" "+nodes[i][3])
                }
            }


            $(document).ready(function(){
                var arrays = [[1,2,3,3],[1,0,0,1],[1,2,3,3],[1,1,2,1]];

                merge(arrays);
            });
        </script>
    </head>
</html>